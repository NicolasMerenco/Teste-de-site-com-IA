<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cosmos ‚Äî Carl Sagan</title>
  <link rel="shortcut icon" href="imagens/favicon_io2/favicon.ico" type="image/x-icon">
  <meta name="description" content="Cole√ß√£o de epis√≥dios ‚Äî Cosmos. Player responsivo com navega√ß√£o acess√≠vel e fundo com part√≠culas c√≥smicas.">
  <style>
    :root{
      --bg-1:#07070b;
      --bg-2:#0f1720;
      --accent:#00ffcc;
      --card-bg:rgba(10,12,15,0.6);
      --glass: rgba(255,255,255,0.03);
      --text:#FFFFFF;
      --muted:rgba(255,255,255,0.7);
      --radius:14px;
      --max-width:1080px;
    }

    /* Reset m√≠nimo */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color:var(--text);
      background:linear-gradient(180deg,var(--bg-1),var(--bg-2));
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* Skip link para acessibilidade */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{position:static;width:auto;height:auto;margin:8px;z-index:999;background:#fff;color:#000;padding:8px;border-radius:6px}

    header{display:flex;align-items:center;gap:16px;padding:22px;justify-content:center}
    h1{margin:0;font-size:2.4rem;letter-spacing:0.6px;text-align:center;text-shadow:0 0 18px rgba(0,255,204,0.08);}
    .subtitle{font-size:0.95rem;color:var(--muted);text-align:center;margin-top:6px}

    main{display:flex;flex-direction:column;align-items:center;padding:18px 18px 64px}

    /* Canvas de part√≠culas cobre o fundo e fica atr√°s de todo o conte√∫do */
    #universe{
      position:fixed;inset:0;z-index:0;pointer-events:none;display:block;opacity:0.95
    }

    .stage{position:relative;z-index:2;width:100%;max-width:var(--max-width);display:flex;flex-direction:column;align-items:center;gap:20px}

    .card{
      width:100%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);padding:16px;backdrop-filter:blur(6px);box-shadow:0 8px 40px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03)
    }

    /* Video container - responsivo e acess√≠vel */
    .video-container{border-radius:12px;overflow:hidden;background:#000;box-shadow:0 0 60px rgba(0,255,204,0.06)}
    .player-embed{width:100%;height:0;padding-bottom:56.25%;position:relative}
    .player-embed iframe{position:absolute;inset:0;width:100%;height:100%;border:0}

    .controls-row{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:12px;flex-wrap:wrap}
    .controls-left{display:flex;align-items:center;gap:12px}
    .controls-right{display:flex;align-items:center;gap:8px}

    select,button{font-size:1rem;padding:10px 14px;border-radius:10px;border:0;background:var(--card-bg);color:var(--text);cursor:pointer}
    button{background:linear-gradient(90deg,var(--accent) 0%, #00e6b8 100%);color:#001;box-shadow:0 8px 30px rgba(0,255,204,0.08);font-weight:600}
    button:focus,select:focus{outline:3px solid rgba(0,255,204,0.12)}

    .label{font-weight:600;margin-right:6px}

    /* Responsividade ampliada (TV / grandes telas) */
    @media (min-width:1200px){h1{font-size:3.4rem}.player-embed{padding-bottom:56.25%}.stage{gap:26px}}

    @media (max-width:768px){h1{font-size:1.8rem}.controls-row{flex-direction:column;align-items:stretch}.controls-right{justify-content:space-between}}

    /* Acessibilidade visual */
    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

    /* Mensagens de erro/fallback */
    .fallback{padding:18px;border-radius:10px;background:rgba(255,255,255,0.03);color:var(--muted);text-align:center}

    /* Prefer reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important}
    }

    footer{margin-top:24px;color:var(--muted);font-size:0.9rem;text-align:center}
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Pular para o conte√∫do</a>
  <canvas id="universe" aria-hidden="true"></canvas>
  <header role="banner">
    <div>
      <h1>üåå Cosmos ‚Äî Carl Sagan</h1>
      <div class="subtitle">Cole√ß√£o de epis√≥dios ‚Äî player acess√≠vel e responsivo</div>
    </div>
  </header>

  <main id="main-content" class="stage" role="main">

    <section class="card" aria-labelledby="player-title">
      <div style="display:flex;flex-direction:column;gap:12px;">
        <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap">
          <div style="display:flex;flex-direction:column">
            <h2 id="player-title" style="margin:0;font-size:1.2rem">Assistir Epis√≥dios</h2>
            <div id="player-desc" class="visually-hidden">Selecione um epis√≥dio no menu e use as teclas ‚Üê ‚Üí para navegar. Pressione R para reiniciar e F para tela cheia.</div>
          </div>

          <div style="display:flex;gap:12px;align-items:center">
            <label for="episodes" class="label" aria-hidden="true">Epis√≥dio</label>
            <select id="episodes" aria-label="Escolha de epis√≥dio">
              <option value="1ewQ-1NTh93tL9yOWF0iDUUcMf2lSM_bU">Epis√≥dio 1</option>
              <option value="1ByYI5V-F-a3hwlpHsG14MaZPW15GP47o">Epis√≥dio 2</option>
              <option value="1qq2ZQR8jIAarB2N7BUsApVw-KL11AB-t">Epis√≥dio 3</option>
              <option value="1gqsPrE2C4G48ErxV-wuswYNRBKGx_LBh">Epis√≥dio 4</option>
              <option value="1vGG7chXX2UV34FM1ZfLFjCHOCqj5Yqw-">Epis√≥dio 5</option>
              <option value="1yyRFOlKf_FuwhRUnRIOwln6l1tgHvmi1">Epis√≥dio 6</option>
              <option value="1b0elQDX0XkpiuOHXp67kmmG5XiZ7LkDQ">Epis√≥dio 7</option>
              <option value="1wwULz-VoB8hCzzJK5d9lMIRWSak9CHJ4">Epis√≥dio 8</option>
              <option value="1lli-IcZ2Hzm1sjZRr-TPYo00CyvE14fv">Epis√≥dio 9</option>
              <option value="1aHcTN8JC-vv0YDzuiLkRDoPOpVxO3t_k">Epis√≥dio 10</option>
              <option value="1iVBcoO8RUp6yLqwgoatxt5YvJ3a0jA_7">Epis√≥dio 11</option>
              <option value="11I0AcjCdMnMk6cR7VOzbxTB-9TCwJ6fB">Epis√≥dio 12</option>
              <option value="1XDeu2197Z1tv_R9lpkWS-TABbnyC20Et">Epis√≥dio 13</option>
            </select>
          </div>
        </div>

        <div class="video-container">
          <div class="player-embed" id="playerEmbed" role="region" aria-label="Player de v√≠deo">
            <iframe id="player" src="about:blank" title="Player de v√≠deo - Cosmos" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" loading="lazy"></iframe>
          </div>
        </div>

        <div class="controls-row" role="toolbar" aria-label="Controles do player">
          <div class="controls-left">
            <button id="prevBtn" type="button" aria-label="Epis√≥dio anterior">‚¨Ö Anterior</button>
            <button id="restartBtn" type="button" aria-label="Reiniciar epis√≥dio">üîÑ Reiniciar</button>
            <button id="nextBtn" type="button" aria-label="Pr√≥ximo epis√≥dio">Pr√≥ximo ‚û°</button>
            <button id="fullscreenBtn" type="button" aria-label="Alternar tela cheia">‚õ∂ Fullscreen</button>
          </div>
          <div class="controls-right">
            <div id="status" aria-live="polite" style="font-size:0.95rem;color:var(--muted)"></div>
          </div>
        </div>

        <div class="fallback visually-hidden" id="fallback">Se o v√≠deo n√£o carregar, abra o epis√≥dio direto no Google Drive.</div>
      </div>
    </section>

    <footer>Use ‚Üê e ‚Üí para navegar, R para reiniciar, F para tela cheia. Suporte para dispositivos m√≥veis, desktop e TV.</footer>
  </main>

  <script>
    // Lista de epis√≥dios (IDs do Google Drive)
    const episodes = [
      '1ewQ-1NTh93tL9yOWF0iDUUcMf2lSM_bU','1ByYI5V-F-a3hwlpHsG14MaZPW15GP47o','1qq2ZQR8jIAarB2N7BUsApVw-KL11AB-t',
      '1gqsPrE2C4G48ErxV-wuswYNRBKGx_LBh','1vGG7chXX2UV34FM1ZfLFjCHOCqj5Yqw-','1yyRFOlKf_FuwhRUnRIOwln6l1tgHvmi1',
      '1b0elQDX0XkpiuOHXp67kmmG5XiZ7LkDQ','1wwULz-VoB8hCzzJK5d9lMIRWSak9CHJ4','1lli-IcZ2Hzm1sjZRr-TPYo00CyvE14fv',
      '1aHcTN8JC-vv0YDzuiLkRDoPOpVxO3t_k','1iVBcoO8RUp6yLqwgoatxt5YvJ3a0jA_7','11I0AcjCdMnMk6cR7VOzbxTB-9TCwJ6fB',
      '1XDeu2197Z1tv_R9lpkWS-TABbnyC20Et'
    ];

    const player = document.getElementById('player');
    const select = document.getElementById('episodes');
    const status = document.getElementById('status');
    const fallback = document.getElementById('fallback');

    function updateStatus(msg){
      status.textContent = msg;
    }

    function buildDriveUrl(id){
      return `https://drive.google.com/file/d/${id}/preview`;
    }

    function loadEpisode(index, announce=true){
      if(index<0) index = episodes.length-1;
      if(index>=episodes.length) index = 0;
      select.selectedIndex = index;
      const url = buildDriveUrl(episodes[index]);
      player.src = url;
      if(announce) updateStatus(`Epis√≥dio ${index+1} carregado`);
    }

    // Inicializa com o √≠ndice 0
    loadEpisode(0,false);

    // Eventos do select
    select.addEventListener('change', ()=>{
      loadEpisode(select.selectedIndex);
    });

    // Bot√µes
    document.getElementById('nextBtn').addEventListener('click', ()=>loadEpisode(select.selectedIndex+1));
    document.getElementById('prevBtn').addEventListener('click', ()=>loadEpisode(select.selectedIndex-1));
    document.getElementById('restartBtn').addEventListener('click', ()=>{
      const current = player.src; player.src=''; setTimeout(()=>player.src=current,80); updateStatus('Reiniciado');
    });

    document.getElementById('fullscreenBtn').addEventListener('click', ()=>{
      const el = document.getElementById('playerEmbed');
      if(el.requestFullscreen) el.requestFullscreen();
      else if(el.webkitRequestFullscreen) el.webkitRequestFullscreen();
      else if(el.msRequestFullscreen) el.msRequestFullscreen();
    });

    // Atalhos de teclado
    window.addEventListener('keydown',(e)=>{
      if(document.activeElement && (document.activeElement.tagName==='INPUT' || document.activeElement.tagName==='TEXTAREA' || document.activeElement.isContentEditable)) return;
      if(e.key === 'ArrowRight') loadEpisode(select.selectedIndex+1);
      if(e.key === 'ArrowLeft') loadEpisode(select.selectedIndex-1);
      if(e.key.toLowerCase() === 'r'){
        const current = player.src; player.src=''; setTimeout(()=>player.src=current,80); updateStatus('Reiniciado');
      }
      if(e.key.toLowerCase() === 'f'){
        const el = document.getElementById('playerEmbed');
        if(el.requestFullscreen) el.requestFullscreen();
      }
    });

    // Fallback se iframe n√£o carregar (simples)
    player.addEventListener('error', ()=>{
      fallback.classList.remove('visually-hidden');
      updateStatus('Erro ao carregar o v√≠deo.');
    });

    // ========== Part√≠culas no fundo (canvas) ==========
    (function(){
      const canvas = document.getElementById('universe');
      const ctx = canvas.getContext('2d');
      let width = canvas.width = innerWidth;
      let height = canvas.height = innerHeight;
      const ratio = window.devicePixelRatio || 1;
      canvas.width = width*ratio; canvas.height = height*ratio; canvas.style.width = width+'px'; canvas.style.height = height+'px'; ctx.scale(ratio,ratio);

      let particles = [];
      const config = {
        count: Math.round((width*height)/60000)+80,
        maxSize: 2.8,
        speed: 0.2,
        drift: 0.04,
        hue: 190
      };

      function rand(min,max){return Math.random()*(max-min)+min}

      function create(){
        particles = [];
        for(let i=0;i<config.count;i++){
          particles.push({
            x:rand(0,width),
            y:rand(0,height),
            vx:rand(-config.speed,config.speed),
            vy:rand(-config.speed,config.speed),
            r:rand(0.3,config.maxSize),
            alpha:rand(0.05,0.9)
          });
        }
      }

      function draw(){
        ctx.clearRect(0,0,width,height);
        // suave nebulosa
        const g = ctx.createLinearGradient(0,0,width,height);
        g.addColorStop(0,'rgba(5,6,8,0.6)');
        g.addColorStop(0.5,'rgba(8,12,18,0.55)');
        g.addColorStop(1,'rgba(6,8,10,0.7)');
        ctx.fillStyle = g; ctx.fillRect(0,0,width,height);

        // estrelas
        for(let p of particles){
          ctx.beginPath();
          ctx.fillStyle = `rgba(180,${200+Math.round(Math.random()*30)},220,${p.alpha})`;
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          ctx.fill();
        }

        // part√≠culas conectadas - leve efeito de fluxo
        for(let i=0;i<particles.length;i++){
          const a = particles[i];
          for(let j=i+1;j<particles.length;j++){
            const b = particles[j];
            const dx = a.x-b.x; const dy = a.y-b.y; const d = Math.sqrt(dx*dx+dy*dy);
            if(d<100){
              ctx.beginPath();
              ctx.strokeStyle = `rgba(0,255,204,${(0.12*(1-d/100))*Math.min(a.alpha,b.alpha)})`;
              ctx.lineWidth = 0.6;
              ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
            }
          }
        }
      }

      function step(){
        for(let p of particles){
          p.x += p.vx + Math.sin((p.y+performance.now()*0.0002))*config.drift;
          p.y += p.vy + Math.cos((p.x+performance.now()*0.0002))*config.drift;
          if(p.x<0) p.x = width; if(p.x>width) p.x=0;
          if(p.y<0) p.y = height; if(p.y>height) p.y=0;
        }
        draw();
        requestAnimationFrame(step);
      }

      // Resposta ao redimensionamento
      let resizeTimer; window.addEventListener('resize', ()=>{
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(()=>{
          width = canvas.width = innerWidth; height = canvas.height = innerHeight;
          canvas.width = width*ratio; canvas.height = height*ratio; canvas.style.width = width+'px'; canvas.style.height = height+'px'; ctx.scale(ratio,ratio);
          config.count = Math.round((width*height)/60000)+80; create();
        },120);
      });

      // Se o usu√°rio prefere reduzir movimento, pausa anima√ß√£o
      const media = window.matchMedia('(prefers-reduced-motion: reduce)');
      if(!media.matches){ create(); step(); }
    })();
  </script>
</body>
</html>
